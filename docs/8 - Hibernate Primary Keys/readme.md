### 51 - Introduction
![img.png](img.png)
### 52 - Hibernate Primary Keys Overview
![img_1.png](img_1.png)
![img_2.png](img_2.png)
![img_3.png](img_3.png)
![img_4.png](img_4.png)
![img_5.png](img_5.png)
![img_6.png](img_6.png)
### 53 - Auto Incremented Primary Key

let's change the `id` field to `Long` and add `@GeneratedValue(strategy = GenerationType.IDENTITY)` to the `id` field.

```java
@Entity
public class Author {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
```
let's do the same for the Author class.

```java

@Entity
public class Author {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
```
`@GeneratedValue(strategy = GenerationType.IDENTITY)` is used to generate a value for the primary key field.
The `strategy` attribute is used to specify the generation strategy. The `GenerationType.IDENTITY` strategy is used to generate a value for the primary key field using the `auto-increment` feature of the database.

`@GeneratedValue(strategy = GenerationType.AUTO)` is used to generate a value for the primary key field.
The `strategy` attribute is used to specify the generation strategy. The `GenerationType.AUTO` Hibernate
is going to use a sequence table to generate the table.

using auto increment is the best way to generate primary keys.it is the most efficient way to generate primary keys.
it is also the most portable way to generate primary keys.
it is more performant than using a sequence table.

what is a sql sequence?
a sequence is a database object that generates a sequence of numbers. it is often used to generate unique primary keys.

what is a sequence table?
a sequence table is a database table that is used to generate a sequence of numbers. it is often used to generate unique primary keys.

let's create a new flyway migration.

```sql
alter table book change id id BIGINT auto_increment;
alter table author change id id BIGINT auto_increment;
```
and run the application.

![img_7.png](img_7.png)

```sql
create table bookdb.author
(
    id         bigint auto_increment
        primary key,
    first_name varchar(255) null,
    last_name  varchar(255) null
);


```

### 54 - Vendor Specific Flyway Migrations

![img_8.png](img_8.png)
let's move the file structure in the db folder

![img_9.png](img_9.png)

`V4.1__h2_auto.sql`

```sql
drop table if exists book;
drop table if exists author;

create table book (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    isbn VARCHAR(255),
    publisher VARCHAR(255),
    title VARCHAR(255),
    author_id BIGINT,
    PRIMARY KEY (id)
);

create table author (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    first_name VARCHAR(255),
    last_name VARCHAR(255),
    PRIMARY KEY (id)
);
```
and change the `application.properties` file to use the h2 database.

```properties
spring.flyway.locations=classpath:db/migration/common,classpath:db/migration/{vendor}
```

### 55 - UUID Primary Key


### 56 - UUID RFC 4122 Primary Key
### 57 - H2 Workaround
### 58 - Natural Primary Key
### 59 - Composite Primary Key
### 60 - Embedded Composite Primary Key
